########## SOLUTION ########## 
QUERY grade
EVIDENCE letter 1 
QUERY_DIST 1 0.649 2 0.344 3 0.007 
 
########## STEPS ########## 
 
------------------------- ELIMINATE VARIABLE sat -------------------------
 
>>> RELEVANT TABLES
 
+-----+--------------+-------------+
| sat | intelligence | Probability |
+-----+--------------+-------------+
|  0  |      0       |     0.95    |
|  0  |      1       |     0.2     |
|  1  |      0       |     0.05    |
|  1  |      1       |     0.8     |
+-----+--------------+-------------+
 
>>> TABLE AFTER MULTIPLICATION
+-----+--------------+-------------+
| sat | intelligence | Probability |
+-----+--------------+-------------+
|  0  |      0       |     0.95    |
|  0  |      1       |     0.2     |
|  1  |      0       |     0.05    |
|  1  |      1       |     0.8     |
+-----+--------------+-------------+
 
>>> TABLE AFTER SUM
+--------------+-------------+
| intelligence | Probability |
+--------------+-------------+
|      0       |     1.0     |
|      1       |     1.0     |
+--------------+-------------+
 
------------------------- ELIMINATE VARIABLE difficulty -------------------------
 
>>> RELEVANT TABLES
 
+------------+-------------+
| difficulty | Probability |
+------------+-------------+
|     0      |     0.6     |
|     1      |     0.4     |
+------------+-------------+
 
+-------+--------------+------------+-------------+
| grade | intelligence | difficulty | Probability |
+-------+--------------+------------+-------------+
|   1   |      0       |     0      |     0.3     |
|   1   |      0       |     1      |     0.05    |
|   1   |      1       |     0      |     0.9     |
|   1   |      1       |     1      |     0.5     |
|   2   |      0       |     0      |     0.4     |
|   2   |      0       |     1      |     0.25    |
|   2   |      1       |     0      |     0.08    |
|   2   |      1       |     1      |     0.3     |
|   3   |      0       |     0      |     0.3     |
|   3   |      0       |     1      |     0.7     |
|   3   |      1       |     0      |     0.02    |
|   3   |      1       |     1      |     0.2     |
+-------+--------------+------------+-------------+
 
>>> TABLE AFTER MULTIPLICATION
+------------+-------+--------------+-------------+
| difficulty | grade | intelligence | Probability |
+------------+-------+--------------+-------------+
|     0      |   1   |      0       |     0.18    |
|     1      |   1   |      0       |     0.02    |
|     0      |   1   |      1       |     0.54    |
|     1      |   1   |      1       |     0.2     |
|     0      |   2   |      0       |     0.24    |
|     1      |   2   |      0       |     0.1     |
|     0      |   2   |      1       |    0.048    |
|     1      |   2   |      1       |     0.12    |
|     0      |   3   |      0       |     0.18    |
|     1      |   3   |      0       |     0.28    |
|     0      |   3   |      1       |    0.012    |
|     1      |   3   |      1       |     0.08    |
+------------+-------+--------------+-------------+
 
>>> TABLE AFTER SUM
+-------+--------------+-------------+
| grade | intelligence | Probability |
+-------+--------------+-------------+
|   1   |      0       |     0.2     |
|   1   |      1       |     0.74    |
|   2   |      0       |     0.34    |
|   2   |      1       |    0.168    |
|   3   |      0       |     0.46    |
|   3   |      1       |    0.092    |
+-------+--------------+-------------+
 
------------------------- ELIMINATE VARIABLE intelligence -------------------------
 
>>> RELEVANT TABLES
 
+--------------+-------------+
| intelligence | Probability |
+--------------+-------------+
|      0       |     0.7     |
|      1       |     0.3     |
+--------------+-------------+
 
+--------------+-------------+
| intelligence | Probability |
+--------------+-------------+
|      0       |     1.0     |
|      1       |     1.0     |
+--------------+-------------+
 
+-------+--------------+-------------+
| grade | intelligence | Probability |
+-------+--------------+-------------+
|   1   |      0       |     0.2     |
|   1   |      1       |     0.74    |
|   2   |      0       |     0.34    |
|   2   |      1       |    0.168    |
|   3   |      0       |     0.46    |
|   3   |      1       |    0.092    |
+-------+--------------+-------------+
 
>>> TABLE AFTER MULTIPLICATION
+-------+--------------+-------------+
| grade | intelligence | Probability |
+-------+--------------+-------------+
|   1   |      0       |     0.14    |
|   1   |      1       |    0.222    |
|   2   |      0       |    0.238    |
|   2   |      1       |     0.05    |
|   3   |      0       |    0.322    |
|   3   |      1       |    0.028    |
+-------+--------------+-------------+
 
>>> TABLE AFTER SUM
+-------+-------------+
| grade | Probability |
+-------+-------------+
|   1   |    0.362    |
|   2   |    0.288    |
|   3   |     0.35    |
+-------+-------------+
 
JOINT DISTRIBUTION 
+-------+--------+-------------+
| grade | letter | Probability |
+-------+--------+-------------+
|   1   |   1    |    0.326    |
|   2   |   1    |    0.173    |
|   3   |   1    |    0.003    |
+-------+--------+-------------+
 
FINAL DISTRIBUTION NORMALIZED
+-------+--------+-------------+
| grade | letter | Probability |
+-------+--------+-------------+
|   1   |   1    |    0.649    |
|   2   |   1    |    0.344    |
|   3   |   1    |    0.007    |
+-------+--------+-------------+
 
